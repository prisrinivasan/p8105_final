---
title: "priyanka"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(dplyr)
library(viridis)
library(sp)
library(rvest)
library(tigris)
library(maptools)
library(ggmap)
library(broom)
library(httr)
library(rgdal)
library(sf)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)
theme_set(theme_bw() + theme(legend.position = "bottom"))
```

```{r}
pests_home = read_csv(file = "./final_data/mold_home.csv") %>%
  janitor::clean_names()

air_conc = read_csv(file = "./final_data/air_conc.csv") %>%
  janitor::clean_names()

mice_home = read_csv(file = "./final_data/mice_home.csv") %>%
  janitor::clean_names()

```

Reading JSON file for UHF geo
```{r}
uhf <- jsonlite::fromJSON("./final_data/UHF42.json")
uhf1 <- jsonlite::fromJSON("./final_data/UHF42.json", flatten=TRUE)

```
Conclusion: the JSON file is weird.

# Shape files
Shape files turned out better. Used a different file from nyc.gov because the Env & Health Data Portal file was inconsistent - combined certain neighborhoods that weren't combined in the rest of the datasets.

[Source of shape files](https://www1.nyc.gov/site/doh/data/health-tools/maps-gis-data-files-for-download.page)

```{r}
shape = st_read("./final_data/shapefiles/", quiet = TRUE)

#look at what we have
str(shape)

#plot all polygon boundaries
plot(shape)

#plot just geometry column
plot(st_geometry(shape))
```

```{r}
merged <- merge(shape, air_conc, by.x = "UHF34_CODE", by.y = "geo_entity_id")
```

